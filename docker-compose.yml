# InitRunner â€” Docker Compose
#
# Start the dashboard:  docker compose up
# Build locally:        docker compose up --build
#
# Do not commit .env files with real API keys.
# Use `docker compose --env-file` or a secret manager for production.

services:
  initrunner:
    # Published image (default)
    image: ghcr.io/vladkesler/initrunner:latest
    # Or from Docker Hub: vladkesler/initrunner:latest
    # Uncomment to build from source instead:
    # build: .
    ports:
      - "8420:8420"
      - "8000:8000"
    volumes:
      # Mount custom roles here to override seeded examples:
      # - ./roles:/data/roles
      - initrunner-data:/data
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY:-}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY:-}
      - GOOGLE_API_KEY=${GOOGLE_API_KEY:-}
      - INITRUNNER_DASHBOARD_API_KEY=${INITRUNNER_DASHBOARD_API_KEY:-}
    restart: unless-stopped
    command: ["initrunner", "ui", "--role-dir", "/data/roles"]

volumes:
  initrunner-data:
